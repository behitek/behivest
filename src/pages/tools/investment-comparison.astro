---
import Layout from '@layouts/Layout.astro';
---

<Layout
  title="So s√°nh ƒë·∫ßu t∆∞ vs ti·∫øt ki·ªám"
  description="C√¥ng c·ª• so s√°nh l·ª£i nhu·∫≠n gi·ªØa ƒë·∫ßu t∆∞ qu·ªπ m·ªü v√† ti·∫øt ki·ªám ng√¢n h√†ng"
>
  <div class="container mx-auto px-4 py-12 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-4xl">
      <a
        href="/tools"
        class="inline-flex items-center text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400"
      >
        <svg
          class="mr-1 h-4 w-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"></path>
        </svg>
        Quay l·∫°i c√¥ng c·ª•
      </a>

      <h1 class="mt-4 text-4xl font-bold text-gray-900 dark:text-white">
        So s√°nh ƒë·∫ßu t∆∞ vs ti·∫øt ki·ªám
      </h1>
      <p class="mt-2 text-gray-600 dark:text-gray-300">
        Xem s·ª± kh√°c bi·ªát gi·ªØa ƒë·∫ßu t∆∞ qu·ªπ m·ªü v√† g·ª≠i ti·∫øt ki·ªám ng√¢n h√†ng
      </p>

      <div class="mt-8 grid gap-8 lg:grid-cols-2">
        <!-- Input Form -->
        <div class="card">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">
            Th√¥ng tin so s√°nh
          </h2>
          <form id="comparison-form" class="mt-6 space-y-6">
            <div>
              <label
                for="initial-amount"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >
                S·ªë ti·ªÅn ban ƒë·∫ßu (VNƒê)
              </label>
              <input
                type="number"
                id="initial-amount"
                name="initial-amount"
                value="50000000"
                min="0"
                step="1000000"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
              />
            </div>

            <div>
              <label
                for="investment-rate"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >
                L·ª£i nhu·∫≠n ƒë·∫ßu t∆∞ k·ª≥ v·ªçng (%/nƒÉm)
              </label>
              <input
                type="number"
                id="investment-rate"
                name="investment-rate"
                value="12"
                min="0"
                max="100"
                step="0.1"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
              />
            </div>

            <div>
              <label
                for="savings-rate"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >
                L√£i su·∫•t ti·∫øt ki·ªám (%/nƒÉm)
              </label>
              <input
                type="number"
                id="savings-rate"
                name="savings-rate"
                value="5"
                min="0"
                max="100"
                step="0.1"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
              />
            </div>

            <div>
              <label
                for="comparison-years"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >
                Th·ªùi gian (nƒÉm)
              </label>
              <input
                type="number"
                id="comparison-years"
                name="comparison-years"
                value="10"
                min="1"
                max="50"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
              />
            </div>

            <button type="submit" class="btn-primary w-full">
              So s√°nh
            </button>
          </form>
        </div>

        <!-- Results -->
        <div class="card">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">
            K·∫øt qu·∫£ so s√°nh
          </h2>
          <div id="comparison-results" class="mt-6 space-y-6">
            <!-- Investment -->
            <div class="rounded-lg border-2 border-primary-200 bg-primary-50 p-4 dark:border-primary-800 dark:bg-primary-900/20">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-primary-900 dark:text-primary-300">
                    ƒê·∫ßu t∆∞ qu·ªπ m·ªü
                  </p>
                  <p
                    id="investment-final"
                    class="mt-2 text-3xl font-bold text-primary-600 dark:text-primary-400"
                  >
                    0 ‚Ç´
                  </p>
                  <p class="mt-1 text-sm text-primary-700 dark:text-primary-400">
                    L·ª£i nhu·∫≠n: <span id="investment-returns" class="font-semibold">0 ‚Ç´</span>
                  </p>
                </div>
                <div class="text-4xl">üìà</div>
              </div>
            </div>

            <!-- Savings -->
            <div class="rounded-lg border-2 border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-medium text-gray-900 dark:text-gray-300">
                    Ti·∫øt ki·ªám ng√¢n h√†ng
                  </p>
                  <p
                    id="savings-final"
                    class="mt-2 text-3xl font-bold text-gray-700 dark:text-gray-300"
                  >
                    0 ‚Ç´
                  </p>
                  <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                    L√£i: <span id="savings-interest" class="font-semibold">0 ‚Ç´</span>
                  </p>
                </div>
                <div class="text-4xl">üè¶</div>
              </div>
            </div>

            <!-- Difference -->
            <div class="rounded-lg border-2 border-secondary-200 bg-secondary-50 p-4 dark:border-secondary-800 dark:bg-secondary-900/20">
              <p class="text-sm font-medium text-secondary-900 dark:text-secondary-300">
                Ch√™nh l·ªách
              </p>
              <p
                id="difference-amount"
                class="mt-2 text-3xl font-bold text-secondary-600 dark:text-secondary-400"
              >
                0 ‚Ç´
              </p>
              <p class="mt-2 text-sm text-secondary-700 dark:text-secondary-400">
                ƒê·∫ßu t∆∞ mang l·∫°i nhi·ªÅu h∆°n <span id="difference-percent" class="font-semibold">0%</span>
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Info Section -->
      <div class="mt-12 card">
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-white">
          N√™n ch·ªçn ƒë·∫ßu t∆∞ hay ti·∫øt ki·ªám?
        </h2>
        <p class="mt-4 text-gray-600 dark:text-gray-300">
          C·∫£ hai ƒë·ªÅu quan tr·ªçng v√† c√≥ vai tr√≤ ri√™ng trong qu·∫£n l√Ω t√†i ch√≠nh c√° nh√¢n:
        </p>

        <div class="mt-6 grid gap-6 md:grid-cols-2">
          <div class="rounded-lg border border-primary-200 bg-primary-50 p-6 dark:border-primary-800 dark:bg-primary-900/20">
            <h3 class="font-semibold text-primary-900 dark:text-primary-300">
              ‚úÖ ƒê·∫ßu t∆∞ (Qu·ªπ m·ªü)
            </h3>
            <ul class="mt-3 space-y-2 text-sm text-primary-800 dark:text-primary-300">
              <li>‚úì L·ª£i nhu·∫≠n cao h∆°n trong d√†i h·∫°n</li>
              <li>‚úì Ch·ªëng l·∫°m ph√°t t·ªët h∆°n</li>
              <li>‚úì Qu·∫£n l√Ω chuy√™n nghi·ªáp</li>
              <li>‚úì Ph√π h·ª£p cho m·ª•c ti√™u 5-10 nƒÉm</li>
              <li>‚ö†Ô∏è C√≥ r·ªßi ro bi·∫øn ƒë·ªông</li>
            </ul>
          </div>

          <div class="rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800">
            <h3 class="font-semibold text-gray-900 dark:text-gray-300">
              ‚úÖ Ti·∫øt ki·ªám (Ng√¢n h√†ng)
            </h3>
            <ul class="mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-400">
              <li>‚úì An to√†n, kh√¥ng r·ªßi ro m·∫•t v·ªën</li>
              <li>‚úì L√£i su·∫•t c·ªë ƒë·ªãnh r√µ r√†ng</li>
              <li>‚úì D·ªÖ r√∫t ti·ªÅn khi c·∫ßn</li>
              <li>‚úì Ph√π h·ª£p cho qu·ªπ kh·∫©n c·∫•p</li>
              <li>‚ö†Ô∏è L·ª£i nhu·∫≠n th·∫•p, d·ªÖ b·ªã l·∫°m ph√°t</li>
            </ul>
          </div>
        </div>

        <div class="mt-6 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20">
          <p class="font-medium text-blue-900 dark:text-blue-300">
            üí° G·ª£i √Ω: K·∫øt h·ª£p c·∫£ hai!
          </p>
          <p class="mt-2 text-sm text-blue-800 dark:text-blue-300">
            ‚Ä¢ Gi·ªØ 3-6 th√°ng chi ph√≠ sinh ho·∫°t trong t√†i kho·∫£n ti·∫øt ki·ªám (qu·ªπ kh·∫©n c·∫•p)<br />
            ‚Ä¢ ƒê·∫ßu t∆∞ ph·∫ßn c√≤n l·∫°i v√†o qu·ªπ m·ªü cho m·ª•c ti√™u d√†i h·∫°n (mua nh√†, ngh·ªâ h∆∞u, con c√°i)
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
    import {
      compareInvestmentVsSavings,
      formatCurrency,
    } from '@/utils/calculators';

    const form = document.getElementById('comparison-form') as HTMLFormElement;

    form?.addEventListener('submit', (e) => {
      e.preventDefault();

      const initialAmount = parseFloat(
        (document.getElementById('initial-amount') as HTMLInputElement).value
      );
      const investmentRate = parseFloat(
        (document.getElementById('investment-rate') as HTMLInputElement).value
      );
      const savingsRate = parseFloat(
        (document.getElementById('savings-rate') as HTMLInputElement).value
      );
      const years = parseInt(
        (document.getElementById('comparison-years') as HTMLInputElement).value
      );

      try {
        const result = compareInvestmentVsSavings(
          initialAmount,
          investmentRate,
          savingsRate,
          years
        );

        // Update results
        document.getElementById('investment-final')!.textContent =
          formatCurrency(result.investmentFinalAmount);
        document.getElementById('investment-returns')!.textContent =
          formatCurrency(result.investmentReturns);

        document.getElementById('savings-final')!.textContent = formatCurrency(
          result.savingsFinalAmount
        );
        document.getElementById('savings-interest')!.textContent =
          formatCurrency(result.savingsInterest);

        document.getElementById('difference-amount')!.textContent =
          formatCurrency(result.difference);

        const diffPercent =
          (result.difference / result.savingsFinalAmount) * 100;
        document.getElementById('difference-percent')!.textContent =
          diffPercent.toFixed(1) + '%';
      } catch (error) {
        alert('Vui l√≤ng ki·ªÉm tra l·∫°i c√°c gi√° tr·ªã nh·∫≠p v√†o');
      }
    });

    // Initial calculation
    form?.dispatchEvent(new Event('submit'));
  </script>
</Layout>
