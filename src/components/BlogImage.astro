---
/**
 * BlogImage component
 * Automatically prepends BASE_URL to image paths for proper routing
 *
 * Usage in MDX:
 * import BlogImage from '@components/BlogImage.astro'
 * <BlogImage src="/blog/image.jpg" alt="Description" />
 */

interface Props {
  src: string;
  alt: string;
  width?: number;
  height?: number;
  class?: string;
}

const { src, alt, width, height, class: className } = Astro.props;
const baseUrl = import.meta.env.BASE_URL;

// Only prepend BASE_URL if src starts with / (absolute path)
// Don't prepend for external URLs (http:// or https://)
const imageSrc = src.startsWith('http')
  ? src
  : `${baseUrl}${src}`.replace('//', '/');
---

<img
  src={imageSrc}
  alt={alt}
  width={width}
  height={height}
  class={className}
  loading="lazy"
/>
